<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>

    <title>Calculadora Mágica</title>

    <!-- Librerías JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <!-- Barra de navegación superior -->
    <nav class="top-nav">
        <div class="nav-left">
            <button class="menu-toggle" onclick="toggleSidebar()">
                <span class="material-icons">menu</span>
            </button>
            <div class="logo">
                <span class="material-icons">calculate</span>
                <span>Calculadora Mágica</span>
            </div>
        </div>
        <div class="nav-right">
            <div class="establecimiento-info">
                <span id="currentEstablecimiento">Sin nombre</span>
            </div>
            <button class="nav-icon" onclick="verPerfilUsuario()" title="Ver perfil">
                <span class="material-icons">person</span>
            </button>
            <button class="nav-icon" onclick="toggleCopyrightNotice()">
                <span class="material-icons">copyright</span>
            </button>
        </div>
    </nav>

    <!-- Botón de regreso para móviles -->
    <button class="back-button-mobile" id="backButtonMobile" onclick="goBack()">
        <span class="material-icons">arrow_back</span>
    </button>

    <!-- Barra lateral -->
    <aside class="sidebar" id="sidebar">
        <nav class="sidebar-nav">
            <div class="nav-section">
                <div class="nav-item active" onclick="showSection('inicio')">
                    <span class="material-icons">home</span>
                    <span>Inicio</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-header">Gestión de Productos</div>
                <div class="nav-item" onclick="showSection('agregar-producto')">
                    <span class="material-icons">add_circle</span>
                    <span>Agregar Producto</span>
                </div>
                <div class="nav-item" onclick="showSection('lista-productos')">
                    <span class="material-icons">list_alt</span>
                    <span>Lista de Productos</span>
                </div>
                <div class="nav-item" onclick="showSection('lista-costos')">
                    <span class="material-icons">attach_money</span>
                    <span>Lista de Costos</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-header">Ventas</div>
                <div class="nav-item" onclick="showSection('carrito-ventas')">
                    <span class="material-icons">shopping_cart</span>
                    <span>Carrito de Ventas</span>
                </div>
                <div class="nav-item" onclick="showSection('escaner-rapido')">
                    <span class="material-icons">qr_code_scanner</span>
                    <span>Escáner Rápido</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-header">Reportes</div>
                <div class="nav-item" onclick="mostrarModalReporte()">
                    <span class="material-icons">summarize</span>
                    <span>Reporte Diario</span>
                </div>
                <div class="nav-item" onclick="mostrarOpcionesPDF()">
                    <span class="material-icons">picture_as_pdf</span>
                    <span>PDF por Categoría</span>
                </div>
                <div class="nav-item" onclick="generarEtiquetasAnaqueles()">
                    <span class="material-icons">local_offer</span>
                    <span>Etiquetas Anaqueles</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-header">Configuración</div>
                <div class="nav-item" onclick="showSection('configuracion')">
                    <span class="material-icons">settings</span>
                    <span>Configuración</span>
                </div>
            </div>
        </nav>
    </aside>

    <!-- Contenido principal -->
    <main class="main-content" id="mainContent">
        <!-- Sección Inicio -->
        <div id="inicio" class="content-section active">
            <div class="welcome-card">
                <h1>Bienvenido a Calculadora Mágica</h1>
                <p>Sistema integral de gestión de ventas e inventario</p>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="material-icons">inventory_2</span>
                        <h3 id="totalProductos">0</h3>
                        <p>Productos Registrados</p>
                    </div>
                    <div class="stat-card">
                        <span class="material-icons">shopping_cart</span>
                        <h3 id="ventasHoy">0</h3>
                        <p>Ventas Hoy</p>
                    </div>
                    <div class="stat-card">
                        <span class="material-icons">warning</span>
                        <h3 id="inventarioBajo">0</h3>
                        <p>Productos con Stock Bajo</p>
                    </div>
                    <div class="stat-card">
                        <span class="material-icons">attach_money</span>
                        <h3 id="tasaActual">0</h3>
                        <p>Tasa BCV Actual</p>
                    </div>
                </div>

                <div class="quick-actions">
                    <h2>Acciones Rápidas</h2>
                    <div class="action-buttons-grid">
                        <button class="action-btn" onclick="showSection('agregar-producto')">
                            <span class="material-icons">add</span>
                            Agregar Producto
                        </button>
                        <button class="action-btn" onclick="showSection('carrito-ventas')">
                            <span class="material-icons">shopping_cart</span>
                            Nueva Venta
                        </button>
                        <button class="action-btn" onclick="mostrarModalReporte()">
                            <span class="material-icons">summarize</span>
                            Reporte Diario
                        </button>
                        <button class="action-btn" onclick="showSection('lista-costos')">
                            <span class="material-icons">list</span>
                            Lista de Costos
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección Agregar Producto -->
        <div id="agregar-producto" class="content-section">
            <div class="section-header">
                <h2>Agregar Producto</h2>
                <p>Complete la información del producto</p>
            </div>

            <div class="form-card">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Nombre del Producto</label>
                        <input type="text" id="producto" class="form-input" placeholder="Ej: Arroz Mary" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Código de Barras</label>
                        <input type="text" id="codigoBarras" class="form-input" placeholder="Opcional">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Categoría</label>
                        <select id="descripcion" class="form-select" required>
                            <option value="">Selecciona una categoría</option>
                            <option value="viveres">Víveres</option>
                            <option value="bebidas">Bebidas</option>
                            <option value="licores">Licores</option>
                            <option value="enlatados">Enlatados</option>
                            <option value="plasticos">Plásticos</option>
                            <option value="papeleria">Papelería</option>
                            <option value="lacteos">Lácteos</option>
                            <option value="ferreteria">Ferretería</option>
                            <option value="agropecuaria">Agropecuaria</option>
                            <option value="frigorifico">Frigorífico</option>
                            <option value="pescaderia">Pescadería</option>
                            <option value="repuesto">Repuesto</option>
                            <option value="confiteria">Confitería</option>
                            <option value="ropa">Ropa</option>
                            <option value="calzados">Calzados</option>
                            <option value="charcuteria">Charcutería</option>
                            <option value="carnes">Carnes</option>
                            <option value="aseo_personal">Aseo Personal</option>
                            <option value="limpieza">Productos de Limpieza</option>
                            <option value="verduras">Verduras</option>
                            <option value="frutas">Frutas</option>
                            <option value="hortalizas">Hortalizas</option>
                            <option value="aliños">Aliños</option>
                            <option value="otros">Otros</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Costo del Producto ($)</label>
                        <input type="number" id="costo" class="form-input" placeholder="0.00" step="0.01" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Porcentaje de Ganancia</label>
                        <input type="number" id="ganancia" class="form-input" placeholder="30" step="0.1" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Unidades por Caja</label>
                        <input type="number" id="unidadesPorCaja" class="form-input" placeholder="1" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Unidades Existentes</label>
                        <input type="number" id="unidadesExistentes" class="form-input" placeholder="0" required>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="calcularPrecioVenta()">
                        <span class="material-icons">calculate</span>
                        Calcular Precio
                    </button>
                    <button type="button" class="btn btn-primary" onclick="guardarProducto()">
                        <span class="material-icons">save</span>
                        Guardar Producto
                    </button>
                </div>

                <div id="precioUnitario" class="price-result">
                    <!-- Resultado del cálculo de precio -->
                </div>
            </div>
        </div>

        <!-- Sección Lista de Productos -->
        <div id="lista-productos" class="content-section">
            <div class="section-header">
                <h2>Lista de Productos</h2>
                <p>Gestión completa del inventario</p>
            </div>

            <div class="toolbar">
                <div class="search-box">
                    <span class="material-icons">search</span>
                    <input type="text" id="buscar" placeholder="Buscar producto..." oninput="buscarProducto()">
                </div>
                <button class="btn btn-primary" onclick="exportarProductos()">
                    <span class="material-icons">download</span>
                    Exportar
                </button>
            </div>

            <div class="data-table">
                <table>
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th>Categoría</th>
                            <th>Código</th>
                            <th>Existencias</th>
                            <th>Precio ($)</th>
                            <th>Precio (Bs)</th>
                            <th>Ganancia</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="productosTableBody">
                        <!-- Los productos se cargan aquí -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Sección Carrito de Ventas -->
        <div id="carrito-ventas" class="content-section">
            <div class="section-header">
                <h2>Carrito de Ventas</h2>
                <p>Gestión de ventas y punto de venta</p>
            </div>

            <div class="carrito-container">
                <div class="scanner-section">
                    <div class="scanner-input">
                        <input type="text" id="codigoBarrasInput" 
                               placeholder="Escanea o ingresa código de barras o nombre del producto"
                               onkeydown="manejarEntradaEscaneo(event)"
                               oninput="mostrarSugerenciasCarritoEnTiempoReal()">
                        <button class="btn btn-primary" onclick="agregarPorCodigoBarras()">
                            <span class="material-icons">add</span>
                            Agregar
                        </button>
                    </div>
                    <div id="sugerencias" class="sugerencias-lista"></div>
                    <div class="scanner-status" id="scannerStatus">
                        Esperando escaneo de código de barras...
                    </div>
                </div>

                <div class="carrito-content">
                    <div class="carrito-header">
                        <h3>Productos en Carrito</h3>
                        <div class="carrito-totales">
                            <div class="total-item" id="totalCarritoBs">
                                <span>Total Bs:</span>
                                <strong>0,00</strong>
                            </div>
                            <div class="total-item" id="totalCarritoDolares">
                                <span>Total $:</span>
                                <strong>0,00</strong>
                            </div>
                        </div>
                    </div>

                    <div class="carrito-table-container">
                        <table class="carrito-table">
                            <thead>
                                <tr>
                                    <th>Producto</th>
                                    <th>Precio Unit. (Bs)</th>
                                    <th>Cantidad</th>
                                    <th>Unidad</th>
                                    <th>Subtotal (Bs)</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="carritoBody">
                                <!-- Items del carrito -->
                            </tbody>
                        </table>
                    </div>

                    <div class="carrito-actions">
                        <button class="btn btn-success" onclick="finalizarVenta()" id="finalizarVenta">
                            <span class="material-icons">point_of_sale</span>
                            Finalizar Venta
                        </button>
                        <button class="btn btn-danger" onclick="limpiarCarrito()">
                            <span class="material-icons">delete</span>
                            Limpiar Carrito
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección Escáner Rápido -->
        <div id="escaner-rapido" class="content-section">
            <div class="section-header">
                <h2>Escáner Rápido</h2>
                <p>Consulta rápida de precios por código o nombre</p>
            </div>

            <div class="scanner-rapido-container">
                <div class="scanner-rapido-input">
                    <div class="search-box-large">
                        <span class="material-icons">search</span>
                        <input type="text" id="busquedaRapida" 
                               placeholder="Ingresa código de barras o nombre del producto..."
                               oninput="buscarProductoRapido()">
                    </div>
                </div>

                <div id="resultadoBusqueda" class="resultado-busqueda">
                    <div class="placeholder-message">
                        <span class="material-icons">search</span>
                        <p>Ingresa un código de barras o nombre de producto para buscar</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección Lista de Costos -->
        <div id="lista-costos" class="content-section">
            <div class="section-header">
                <h2>Lista de Costos</h2>
                <p>Resumen de costos y precios de productos</p>
            </div>

            <div class="toolbar">
                <div class="search-box">
                    <span class="material-icons">search</span>
                    <input type="text" id="buscarCostos" placeholder="Buscar en costos..." oninput="filtrarListaCostos()">
                </div>
                <button class="btn btn-primary" onclick="generarPDFCostos()">
                    <span class="material-icons">picture_as_pdf</span>
                    Generar PDF
                </button>
            </div>

            <div class="costos-list" id="listaCostosContainer">
                <div class="costos-grid" id="listaCostos">
                    <!-- Lista de costos se carga aquí -->
                </div>
            </div>
        </div>

        <!-- Sección Configuración MEJORADA -->
        <div id="configuracion" class="content-section">
            <div class="section-header">
                <h2>Configuración del Sistema</h2>
                <p>Gestión de usuarios, tasas y respaldos</p>
            </div>

            <div class="config-grid">
                <!-- Gestión de Usuarios -->
                <div class="config-card">
                    <h3>Gestión de Usuarios</h3>
                    <div class="user-management">
                        <div class="user-form">
                            <div class="form-group">
                                <label class="form-label">Tipo de Usuario</label>
                                <select id="tipoUsuario" class="form-select" onchange="toggleCamposUsuario()">
                                    <option value="cajero">Cajero</option>
                                    <option value="admin">Administrador</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Nombre del Usuario</label>
                                <input type="text" id="nombreUsuario" class="form-input" placeholder="Ej: Juan Pérez">
                            </div>
                            
                            <div class="form-group" id="campoClaveAdmin">
                                <label class="form-label">Clave de Administrador</label>
                                <input type="password" id="claveAdminActual" class="form-input" placeholder="Para crear/editar administradores">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Contraseña</label>
                                <input type="password" id="passwordUsuario" class="form-input" placeholder="Mínimo 4 caracteres">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Confirmar Contraseña</label>
                                <input type="password" id="confirmPassword" class="form-input" placeholder="Repetir contraseña">
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn btn-primary" onclick="guardarUsuario()">
                                    <span class="material-icons">person_add</span>
                                    Crear Usuario
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="limpiarFormularioUsuario()">
                                    <span class="material-icons">clear</span>
                                    Limpiar
                                </button>
                            </div>
                        </div>
                        
                        <div class="users-list" id="listaUsuarios">
                            <!-- Lista de usuarios se cargará aquí -->
                        </div>
                    </div>
                </div>

                <!-- Configuración General -->
                <div class="config-card">
                    <h3>Configuración General</h3>
                    <div class="config-form">
                        <div class="form-group">
                            <label class="form-label">Nombre del Establecimiento</label>
                            <input type="text" id="nombreEstablecimiento" class="form-input" placeholder="Ej: Tienda La Bendición">
                            <button class="btn btn-primary" onclick="guardarNombreEstablecimiento()">
                                <span class="material-icons">save</span>
                                Guardar
                            </button>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Tasa BCV</label>
                            <input type="number" id="tasaBCV" class="form-input" placeholder="Tasa BCV" step="0.0001">
                            <button class="btn btn-primary" onclick="actualizarTasaBCV()">
                                <span class="material-icons">update</span>
                                Actualizar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Respaldo de Datos -->
                <div class="config-card">
                    <h3>Respaldo de Datos</h3>
                    <div class="config-actions">
                        <button class="btn btn-secondary" onclick="descargarBackup()">
                            <span class="material-icons">backup</span>
                            Descargar Respaldo
                        </button>
                        <button class="btn btn-secondary" onclick="document.getElementById('fileInput').click()">
                            <span class="material-icons">restore</span>
                            Cargar Respaldo
                        </button>
                        <input type="file" id="fileInput" accept=".json" style="display: none" onchange="cargarBackup(this.files)">
                    </div>
                    
                    <div class="recovery-options" style="margin-top: 20px;">
                        <h4>Recuperar Contraseñas</h4>
                        <button class="btn btn-warning" onclick="mostrarModalRecuperacion()">
                            <span class="material-icons">lock_reset</span>
                            Recuperar Acceso
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal de Login -->
    <div id="modalLogin" class="modal" style="display: block;">
        <div class="modal-content">
            <div class="login-header">
                <span class="material-icons">lock</span>
                <h3>Iniciar Sesión</h3>
                <p>Seleccione su usuario para comenzar</p>
            </div>
            
            <div class="login-options" id="loginOptions">
                <!-- Los usuarios se cargarán aquí -->
            </div>
            
            <div class="login-actions">
                <button class="btn btn-primary" onclick="mostrarCrearUsuario()">
                    <span class="material-icons">person_add</span>
                    Crear Nuevo Usuario
                </button>
                <button class="btn btn-secondary" onclick="modoDemo()">
                    <span class="material-icons">play_arrow</span>
                    Modo Demo
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Crear Usuario Rápido -->
    <div id="modalCrearUsuario" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModalCrearUsuario()">&times;</span>
            <h3>Crear Usuario Rápido</h3>
            
            <div class="form-group">
                <label class="form-label">Nombre del Usuario</label>
                <input type="text" id="nombreUsuarioRapido" class="form-input" placeholder="Ej: María González">
            </div>
            
            <div class="form-group">
                <label class="form-label">Tipo de Usuario</label>
                <select id="tipoUsuarioRapido" class="form-select">
                    <option value="cajero">Cajero</option>
                    <option value="admin">Administrador</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">Contraseña</label>
                <input type="password" id="passwordUsuarioRapido" class="form-input" placeholder="Mínimo 4 caracteres">
            </div>
            
            <div class="modal-buttons">
                <button class="btn btn-success" onclick="crearUsuarioRapido()">
                    <span class="material-icons">check</span>
                    Crear Usuario
                </button>
                <button class="btn btn-secondary" onclick="cerrarModalCrearUsuario()">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Métodos de Pago -->
    <div id="modalPago" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModalPago()">&times;</span>
            <h3>Seleccionar Método de Pago</h3>

            <div class="resumen-venta">
                <h4>Resumen de Venta</h4>
                <p id="resumenTotalBs">Total: Bs 0,00</p>
                <p id="resumenTotalDolares">Total: $ 0,00</p>
            </div>

            <div class="metodos-pago">
                <button onclick="seleccionarMetodoPago('efectivo_bs')">Efectivo Bs</button>
                <button onclick="seleccionarMetodoPago('efectivo_dolares')">Efectivo $</button>
                <button onclick="seleccionarMetodoPago('punto')">Punto</button>
                <button onclick="seleccionarMetodoPago('pago_movil')">Pago Móvil</button>
                <button onclick="seleccionarMetodoPago('biopago')">Biopago</button>
            </div>

            <div id="detallesPago" style="display: none; margin-top: 20px;">
                <h4>Detalles del Pago</h4>
                <div id="camposPago"></div>
                <div class="modal-buttons">
                    <button onclick="confirmarMetodoPago()" class="btn btn-success">Confirmar Pago</button>
                    <button onclick="cancelarPago()" class="btn btn-danger">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Reporte Diario MEJORADO -->
    <div id="modalReporte" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModalReporte()">&times;</span>
            <h3>Generar Reporte Diario</h3>
            
            <div class="opciones-reporte">
                <div class="opcion-reporte" onclick="generarReporteDiario('hoy')">
                    <span class="material-icons">today</span>
                    <div>
                        <h4>Reporte de Hoy</h4>
                        <p>Generar reporte con las ventas del día de hoy</p>
                    </div>
                </div>
                
                <div class="opcion-reporte" onclick="mostrarSelectorFecha()">
                    <span class="material-icons">date_range</span>
                    <div>
                        <h4>Reporte por Fecha</h4>
                        <p>Seleccionar una fecha específica para el reporte</p>
                    </div>
                </div>
            </div>

            <div id="selectorFecha" style="display: none; margin-top: 20px;">
                <div class="form-group">
                    <label class="form-label">Seleccionar Fecha:</label>
                    <input type="date" id="fechaReporte" class="form-input" max="">
                </div>
                
                <div class="export-options" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                    <button onclick="generarReportePDF()" class="btn btn-primary">
                        <span class="material-icons">picture_as_pdf</span>
                        Exportar a PDF
                    </button>
                    <button onclick="generarReporteExcel()" class="btn btn-success">
                        <span class="material-icons">table_chart</span>
                        Exportar a Excel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Categorías PDF -->
    <div id="modalCategorias" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModalCategorias()">&times;</span>
            <h3>Generar PDF por Categoría</h3>
            <div class="categorias-lista">
                <button onclick="generarPDFPorCategoria('todos')" class="categoria-btn">TODOS LOS PRODUCTOS</button>
                <button onclick="generarPDFPorCategoria('viveres')" class="categoria-btn">VÍVERES</button>
                <button onclick="generarPDFPorCategoria('bebidas')" class="categoria-btn">BEBIDAS</button>
                <button onclick="generarPDFPorCategoria('licores')" class="categoria-btn">LICORES</button>
                <button onclick="generarPDFPorCategoria('enlatados')" class="categoria-btn">ENLATADOS</button>
                <button onclick="generarPDFPorCategoria('plasticos')" class="categoria-btn">PLÁSTICOS</button>
                <button onclick="generarPDFPorCategoria('papeleria')" class="categoria-btn">PAPELERÍA</button>
                <button onclick="generarPDFPorCategoria('lacteos')" class="categoria-btn">LÁCTEOS</button>
                <button onclick="generarPDFPorCategoria('ferreteria')" class="categoria-btn">FERRETERÍA</button>
                <button onclick="generarPDFPorCategoria('agropecuaria')" class="categoria-btn">AGROPECUARIA</button>
                <button onclick="generarPDFPorCategoria('frigorifico')" class="categoria-btn">FRIGORÍFICO</button>
                <button onclick="generarPDFPorCategoria('pescaderia')" class="categoria-btn">PESCADERÍA</button>
                <button onclick="generarPDFPorCategoria('repuesto')" class="categoria-btn">REPUESTO</button>
                <button onclick="generarPDFPorCategoria('confiteria')" class="categoria-btn">CONFITERÍA</button>
                <button onclick="generarPDFPorCategoria('ropa')" class="categoria-btn">ROPA</button>
                <button onclick="generarPDFPorCategoria('calzados')" class="categoria-btn">CALZADOS</button>
                <button onclick="generarPDFPorCategoria('charcuteria')" class="categoria-btn">CHARCUTERÍA</button>
                <button onclick="generarPDFPorCategoria('carnes')" class="categoria-btn">CARNES</button>
                <button onclick="generarPDFPorCategoria('aseo_personal')" class="categoria-btn">ASEO PERSONAL</button>
                <button onclick="generarPDFPorCategoria('limpieza')" class="categoria-btn">PRODUCTOS DE LIMPIEZA</button>
                <button onclick="generarPDFPorCategoria('verduras')" class="categoria-btn">VERDURAS</button>
                <button onclick="generarPDFPorCategoria('frutas')" class="categoria-btn">FRUTAS</button>
                <button onclick="generarPDFPorCategoria('hortalizas')" class="categoria-btn">HORTALIZAS</button>
                <button onclick="generarPDFPorCategoria('aliños')" class="categoria-btn">ALIÑOS</button>
                <button onclick="generarPDFPorCategoria('otros')" class="categoria-btn">OTROS</button>
            </div>
        </div>
    </div>

    <!-- Modal Etiquetas -->
    <div id="modalEtiquetas" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModalEtiquetas()">&times;</span>
            <h3>Generar Etiquetas para Anaqueles</h3>
            <div class="categorias-lista">
                <button onclick="generarEtiquetasPorCategoria('todos')" class="categoria-btn">TODOS LOS PRODUCTOS</button>
                <button onclick="generarEtiquetasPorCategoria('viveres')" class="categoria-btn">VÍVERES</button>
                <button onclick="generarEtiquetasPorCategoria('bebidas')" class="categoria-btn">BEBIDAS</button>
                <button onclick="generarEtiquetasPorCategoria('licores')" class="categoria-btn">LICORES</button>
                <button onclick="generarEtiquetasPorCategoria('enlatados')" class="categoria-btn">ENLATADOS</button>
                <button onclick="generarEtiquetasPorCategoria('plasticos')" class="categoria-btn">PLÁSTICOS</button>
                <button onclick="generarEtiquetasPorCategoria('papeleria')" class="categoria-btn">PAPELERÍA</button>
                <button onclick="generarEtiquetasPorCategoria('lacteos')" class="categoria-btn">LÁCTEOS</button>
                <button onclick="generarEtiquetasPorCategoria('ferreteria')" class="categoria-btn">FERRETERÍA</button>
                <button onclick="generarEtiquetasPorCategoria('agropecuaria')" class="categoria-btn">AGROPECUARIA</button>
                <button onclick="generarEtiquetasPorCategoria('frigorifico')" class="categoria-btn">FRIGORÍFICO</button>
                <button onclick="generarEtiquetasPorCategoria('pescaderia')" class="categoria-btn">PESCADERÍA</button>
                <button onclick="generarEtiquetasPorCategoria('repuesto')" class="categoria-btn">REPUESTO</button>
                <button onclick="generarEtiquetasPorCategoria('confiteria')" class="categoria-btn">CONFITERÍA</button>
                <button onclick="generarEtiquetasPorCategoria('ropa')" class="categoria-btn">ROPA</button>
                <button onclick="generarEtiquetasPorCategoria('calzados')" class="categoria-btn">CALZADOS</button>
                <button onclick="generarEtiquetasPorCategoria('charcuteria')" class="categoria-btn">CHARCUTERÍA</button>
                <button onclick="generarEtiquetasPorCategoria('carnes')" class="categoria-btn">CARNES</button>
                <button onclick="generarEtiquetasPorCategoria('aseo_personal')" class="categoria-btn">ASEO PERSONAL</button>
                <button onclick="generarEtiquetasPorCategoria('limpieza')" class="categoria-btn">PRODUCTOS DE LIMPIEZA</button>
                <button onclick="generarEtiquetasPorCategoria('verduras')" class="categoria-btn">VERDURAS</button>
                <button onclick="generarEtiquetasPorCategoria('frutas')" class="categoria-btn">FRUTAS</button>
                <button onclick="generarEtiquetasPorCategoria('hortalizas')" class="categoria-btn">HORTALIZAS</button>
                <button onclick="generarEtiquetasPorCategoria('aliños')" class="categoria-btn">ALIÑOS</button>
                <button onclick="generarEtiquetasPorCategoria('otros')" class="categoria-btn">OTROS</button>
            </div>
        </div>
    </div>

    <!-- Modal Recuperación de Contraseñas -->
    <div id="modalRecuperacion" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModalRecuperacion()">&times;</span>
            <h3>Recuperar Acceso al Sistema</h3>
            
            <div class="recovery-steps">
                <div class="step">
                    <h4>Paso 1: Verificar Identidad</h4>
                    <div class="form-group">
                        <label class="form-label">Correo de Recuperación</label>
                        <input type="email" id="emailRecuperacion" class="form-input" placeholder="tu@email.com">
                    </div>
                    <button class="btn btn-primary" onclick="verificarIdentidad()">
                        Verificar Identidad
                    </button>
                </div>
                
                <div class="step" id="stepReset" style="display: none; margin-top: 20px;">
                    <h4>Paso 2: Restablecer Contraseña</h4>
                    <div class="form-group">
                        <label class="form-label">Nueva Contraseña</label>
                        <input type="password" id="nuevaPassword" class="form-input" placeholder="Nueva contraseña">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirmar Nueva Contraseña</label>
                        <input type="password" id="confirmNuevaPassword" class="form-input" placeholder="Confirmar contraseña">
                    </div>
                    <button class="btn btn-success" onclick="restablecerPassword()">
                        Restablecer Contraseña
                    </button>
                </div>
            </div>
            
            <div class="recovery-info">
                <p><strong>Nota:</strong> Este proceso restablecerá todas las contraseñas del sistema. Use con precaución.</p>
            </div>
        </div>
    </div>

    <!-- Aviso de copyright -->
    <div class="copyright-notice" id="copyrightNotice">
        <button class="close-btn" onclick="toggleCopyrightNotice()">×</button>
        <strong>ADVERTENCIA:</strong> Este sistema está protegido por derechos de autor.
        <strong>No revendas tu código de acceso</strong> o será bloqueado y perderás tu dinero.
        Cualquier uso no autorizado será penalizado según las leyes aplicables.
    </div>

    <!-- Toast container -->
    <div id="toastContainer" aria-live="polite" aria-atomic="true"></div>

    <script src="script.js"></script>
</body>
</html>
